# ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ğŸ¬

> **ì†Œê°œ: ì˜í™”ì§„í¥ìœ„ì›íšŒ ì˜¤í”ˆ API(ì¼ë³„ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì¡°íšŒ), ì¹´ì¹´ì˜¤ ì´ë¯¸ì§€ ê²€ìƒ‰ API(ì˜í™” í¬ìŠ¤í„° ì´ë¯¸ì§€ ê²€ìƒ‰)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì˜í™” ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ì•±ì´ë‹¤. í™”ë©´ ëª¨ë“œë¥¼ ì„ íƒí•˜ì—¬ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì¡°íšŒ í™”ë©´ì˜ í˜•íƒœë¥¼ ë°”ê¿”ì¤„ ìˆ˜ ìˆìœ¼ë©°, URLCacheì™€ NSCacheë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ ë¥´ê²Œ ì •ë³´ ì¡°íšŒë¥¼ í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë„ êµ¬í˜„ë˜ì–´ìˆë‹¤.**


</br>

## ëª©ì°¨
1. [íŒ€ì›](#1-íŒ€ì›)
2. [íƒ€ì„ë¼ì¸](#2-íƒ€ì„ë¼ì¸)
3. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#3-í”„ë¡œì íŠ¸-êµ¬ì¡°)
4. [ì‹¤í–‰í™”ë©´](#4-ì‹¤í–‰-í™”ë©´)
5. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#5-íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)
6. [íŒ€íšŒê³ ](#6-íŒ€íšŒê³ )
7. [ì°¸ê³ ë§í¬](#7-ì°¸ê³ -ë§í¬)

<br>

## 1. íŒ€ì›

|[Harry](https://github.com/HarryHyeon)| [kaki](https://github.com/kak1x) |
| :--------: | :--------: |
|<img height="180px" src="https://i.imgur.com/BYdaDjU.png">| <img height="180px" src="https://i.imgur.com/KkFB7j3.png"> |

<br>

## 2. íƒ€ì„ë¼ì¸
#### í”„ë¡œì íŠ¸ ì§„í–‰ ê¸°ê°„ : 23.03.20 (ì›”) ~ 23.04.14 (ê¸ˆ)

<details>
    <summary><big>íƒ€ì„ë¼ì¸</big></big></summary>

| ë‚ ì§œ | íƒ€ì„ë¼ì¸ |
| --- | --- |
|23.03.20 (ì›”)| ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ëª¨ë¸ íƒ€ì…, ì˜í™” ìƒì„¸ì •ë³´ ëª¨ë¸ íƒ€ì… êµ¬í˜„, ëª¨ë¸ í…ŒìŠ¤íŠ¸ |
|23.03.21 (í™”)| ì›ê²© ì„œë²„ì™€ Http í†µì‹ ì„ ìœ„í•œ NetworkManager íƒ€ì… êµ¬í˜„ |
|23.03.22 (ìˆ˜)| Endpointë¥¼ ìƒì„±ê°€ëŠ¥í•œ BoxOfficeEndpoint êµ¬í˜„ |
|23.03.23 (ëª©)| NetworkManager í…ŒìŠ¤íŠ¸(MockURLSession, MockURLSessionDataTask í™œìš©) |
|23.03.24 (ê¸ˆ)| ì½”ë“œ ì»¨ë²¤ì…˜ ìˆ˜ì •, Pull Request ì»¨í”Œë¦­ í•´ê²°, README ì‘ì„±, CollectionView CompositionalLayout / Identifying í”„ë¡œí† ì½œ êµ¬í˜„ |
|23.03.27 (ì›”)| JSON ëª¨ë¸ ë¶„ë¦¬ ë° ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í”„ë¡œí¼í‹° ì‚­ì œ, CollectionViewListCell / Activity Indicator / Refresh Control êµ¬í˜„ |
|23.03.28 (í™”)| CollectionViewListCell ì˜¤í† ë ˆì´ì•„ì›ƒ ìˆ˜ì • ë° ì…€ ë°ì´í„° í• ë‹¹ ê¸°ëŠ¥ êµ¬í˜„ |
|23.03.29 (ìˆ˜)| URLRequest ìš”ì²­ìœ¼ë¡œ ë¡œì§ ë³€ê²½, MovieInfoViewController / ScrollView / í¬ìŠ¤í„° ì´ë¯¸ì§€ ë° ì˜í™” ìƒì„¸ì •ë³´ fetch ê¸°ëŠ¥ êµ¬í˜„ |
|23.03.30 (ëª©)| ì½”ë“œ ì»¨ë²¤ì…˜ ìˆ˜ì •, DataFormatter íƒ€ì… í”„ë¡œí¼í‹° ì‚¬ìš©ìœ¼ë¡œ ë³€ê²½ |
|23.03.31 (ê¸ˆ)| ì‚¬ìš© API ë³€ê²½ (ë„¤ì´ë²„ ì˜í™” -> ì¹´ì¹´ì˜¤ ì´ë¯¸ì§€), MovieInfoViewController ì˜¤í† ë ˆì´ì•„ì›ƒ ìˆ˜ì •, Activity Indicator êµ¬í˜„ |
|23.04.03 (ì›”)| UICalendarViewë¥¼ í™œìš©í•œ CalendarViewController êµ¬í˜„ |
|23.04.04 (í™”)| CompositionalLayoutì„ ì´ìš©í•´ ìƒˆë¡œìš´ CustomLayout ìƒì„± ë° ì´ë¥¼ ìœ„í•œ BoxOfficeCollectionViewCell êµ¬í˜„ |
|23.04.05 (ìˆ˜)| ì½”ë“œ ì»¨ë²¤ì…˜ ìˆ˜ì •, ViewController ê¸°ëŠ¥ ë¶„ë¦¬, NetworkManagerTestì— Mockì„ í™œìš©í•œ í–‰ìœ„ ê²€ì¦ í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤ ì¶”ê°€ |
|23.04.06 (ëª©)| Step4ì—ì„œ ë³€ê²½í–ˆë˜ ì‚¬í•­ë“¤ Git Conflict í•´ê²°í•˜ì—¬ ë°•ìŠ¤ì˜¤í”¼ìŠ¤2 Step1, Step2ì— Merge |
|23.04.07 (ê¸ˆ)| README ì‘ì„±, Date extension êµ¬í˜„í•˜ì—¬ ì–´ì œ ë‚ ì§œ êµ¬í˜„ë¶€ ëŒ€ì²´, ToolBar, ActionSheet ë° í™”ë©´ ì „í™˜ ê¸°ëŠ¥(ë ˆì´ì•„ì›ƒ ë° ì…€ íƒ€ì… ë³€ê²½) êµ¬í˜„ |
|23.04.08 (í† )| ë¶ˆí•„ìš”í•œ self ë°”ì¸ë”© ì œê±° |
|23.04.09 (ì¼)| í™”ë©´ ì „í™˜ ë°©ì‹ ìˆ˜ì •(CollectionView 2ê°œë¥¼ ì´ìš©í•˜ì—¬ ì„œë¡œ ì „í™˜í•´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½) |
|23.04.10 (ì›”)| 2ê°œì˜ CollectionView ì „í™˜ê°„ ì• ë‹ˆë©”ì´ì…˜ ê¸°ëŠ¥ ì¶”ê°€ êµ¬í˜„, RefreshControl ì˜¤ë¥˜ í•´ê²°, Dynamic Type ì ìš© |
|23.04.11 (í™”)| URLCache ì •ì±… ìˆ˜ë¦½ ë° URLCache ê¸°ëŠ¥ ì¶”ê°€ |
|23.04.12 (ìˆ˜)| ì½”ë“œ ì»¨ë²¤ì…˜ ìˆ˜ì •, AlertFactory Pattern ì ìš©, ImageCache ê¸°ëŠ¥ ì¶”ê°€ |
|23.04.13 (ëª©)| í™”ë©´ ì „í™˜ ë°©ì‹ ìˆ˜ì •(í•œ ê°œì˜ CollectionViewì—ì„œ ê¸°ë³¸ ì• ë‹ˆë©”ì´ì…˜ ì—†ì´ ë ˆì´ì•„ì›ƒ ë³€ê²½í•´ì£¼ëŠ” ë°©ì‹ ì ìš©, Customìœ¼ë¡œ êµ¬í˜„í•œ ì• ë‹ˆë©”ì´ì…˜ ì ìš©) |
|23.04.14 (ê¸ˆ)| README ì‘ì„± |

</details>

<br>

## 3. í”„ë¡œì íŠ¸ êµ¬ì¡°

<details>
    <summary><big>í´ë” êµ¬ì¡°</big></big></summary>

``` swift
BoxOffice
    â”œâ”€â”€ Model
    |    â”œâ”€â”€ Network
    |    â”‚    â”œâ”€â”€ NetworkManager
    |    â”‚    â”œâ”€â”€ NetworkError
    |    â”‚    â”œâ”€â”€ BoxOfficeEndpoint
    |    â”‚    â”œâ”€â”€ URLSessionProtocol
    |    â”‚    â”œâ”€â”€ URLSessionDataTaskProtocol
    |    â”‚    â”œâ”€â”€ URLCacheManager
    |    â”‚    â””â”€â”€ ImageCacheManager
    |    â””â”€â”€ JSONModel
    |         â”œâ”€â”€ BoxOffice
    |         â”‚    â”œâ”€â”€ BoxOffice
    |         â”‚    â”œâ”€â”€ BoxOfficeResult
    |         â”‚    â”œâ”€â”€ DailyBoxOffice
    |         â”‚    â””â”€â”€ RankOldAndNew
    |         â”‚â”€â”€ Movie
    |         â”‚    â”œâ”€â”€ Movie
    |         â”‚    â”œâ”€â”€ MovieInfoResult
    |         â”‚    â”œâ”€â”€ MovieInfo
    |         â”‚    â”œâ”€â”€ Actor
    |         â”‚    â”œâ”€â”€ Audit
    |         â”‚    â”œâ”€â”€ Director
    |         â”‚    â”œâ”€â”€ Genre
    |         â”‚    â””â”€â”€ Nation
    |         â””â”€â”€ MoviePoster
    |              â””â”€â”€ MoviePoster
    â”œâ”€â”€ View
    |    â”œâ”€â”€ Main
    |    â”œâ”€â”€ LaunchScreen
    |    â”œâ”€â”€ BoxOfficeCollectionViewListCell.xib
    |    â”œâ”€â”€ BoxOfficeCollectionViewCell.xib
    |    â”œâ”€â”€ BoxOfficeCollectionViewListCell.swift
    |    â”œâ”€â”€ BoxOfficeCollectionViewCell.swift
    |    â”œâ”€â”€ BoxOfficeViewController
    |    â”œâ”€â”€ MovieInfoViewController
    |    â””â”€â”€ CalendarViewController
    â”œâ”€â”€ Controller
    |    â”œâ”€â”€ BoxOfficeDataLoader
    |    â””â”€â”€ MovieInfoDataLoader
    â”œâ”€â”€ Etc
    |    â”œâ”€â”€ AlertFactory
    |    â”‚    â”œâ”€â”€ AlertFactoryService
    |    â”‚    â”œâ”€â”€ AlertImplementation
    |    â”‚    â””â”€â”€ AlertViewData
    |    â”œâ”€â”€ AppDelegate
    |    â”œâ”€â”€ SceneDelegate
    |    â”œâ”€â”€ Identifying
    |    â”œâ”€â”€ Array+Subscript
    |    â”œâ”€â”€ String+DecimalFormatter
    |    â”œâ”€â”€ DateFormmatter+HyphenFormat
    |    â”œâ”€â”€ Date+previousDate
    |    â”œâ”€â”€ CellConfigurable
    |    â””â”€â”€ UICollectionView+Animate
    â”œâ”€â”€ Assets
    â”œâ”€â”€ Info
    â””â”€â”€ UnitTests
         â”œâ”€â”€ BoxOfficeTests
         â”‚    â””â”€â”€ BoxOfficeTests
         â”œâ”€â”€ MovieTests
         â”‚    â””â”€â”€ BoxOfficeTests
         â””â”€â”€ NetworkManagerTests
              â”œâ”€â”€ NetworkManagerTests
              â”œâ”€â”€ SampleData
              â””â”€â”€ Mocks
                   â”œâ”€â”€ MockURLSessionDataTask
                   â””â”€â”€ MockURLSession
```

</details>

</br>

## 4. ì‹¤í–‰ í™”ë©´

|**ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì¡°íšŒ í™”ë©´**|**í™”ë©´ ì •ë³´ ìƒˆë¡œ ê³ ì¹¨**|**ì˜í™” ìƒì„¸ ì •ë³´ í˜ì´ì§€ ì´ë™**|
|:-----:|:-----:|:-----:|
| <img src = "https://user-images.githubusercontent.com/51234397/229131236-f60a5e28-51d2-4cb5-b404-8b7c05d00fdc.gif" width = "300">|<img src = "https://user-images.githubusercontent.com/51234397/229131247-ddb94683-f139-41a3-956d-7547e165fee4.gif" width = "300"> |<img src = "https://user-images.githubusercontent.com/51234397/229131249-fb7f5665-9f3f-4dc2-94f4-992a40f2ee35.gif" width = "300">|
|**ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì¡°íšŒ í™”ë©´ ëª¨ë“œ ë³€ê²½**|**ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ì¡°íšŒ í™”ë©´ URLCache**|**ì˜í™” ìƒì„¸ ì •ë³´ ImageCache, URLCache**|
| <img src = "https://user-images.githubusercontent.com/51234397/231964204-4589740d-2ecb-433c-a479-a6285d57a421.gif" width = "300">|<img src = "https://user-images.githubusercontent.com/51234397/231964220-817b7d68-dd49-4cfc-800a-ff0c420d1d0b.gif" width = "300"> |<img src = "https://user-images.githubusercontent.com/51234397/231964233-ab8c55bd-76fe-4b0f-bc9d-52b6af6add13.gif" width = "300">|

<br>

## 5. íŠ¸ëŸ¬ë¸” ìŠˆíŒ…

### 1ï¸âƒ£ Modelì˜ UnitTest

```swift
extension DailyBoxOfficeList: Equatable {
    public static func == (lhs: DailyBoxOfficeList, rhs: DailyBoxOfficeList) -> Bool {
        return lhs.number == rhs.number
        && lhs.rank == rhs.rank
        && lhs.rankIncrement == rhs.rankIncrement
        && lhs.rankOldAndNew == rhs.rankOldAndNew
        && lhs.movieCode == rhs.movieCode
        && lhs.movieKoreanName == rhs.movieKoreanName
        && lhs.openDate == rhs.openDate
        && lhs.salesAmount == rhs.salesAmount
        && lhs.salesShare == rhs.salesShare
        && lhs.salesIncrement == rhs.salesIncrement
        && lhs.salesChange == rhs.salesChange
        && lhs.salesAccumulation == rhs.salesAccumulation
        && lhs.audienceCount == rhs.audienceCount
        && lhs.audienceIncrement == rhs.audienceIncrement
        && lhs.audienceChange == rhs.audienceChange
        && lhs.audienceAccumulation == rhs.audienceAccumulation
        && lhs.screenCount == rhs.screenCount
        && lhs.showCount == rhs.showCount
    }
}
```

- ëª¨ë¸ì˜ ìœ ë‹› í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ Equatable ì±„íƒì„ í•˜ì—¬ ëª¨ë¸ì˜ ëª¨ë“  ê°’ì´ ë§ëŠ”ì§€ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤.
- ê·¸ëŸ¬ë‚˜ ìœ„ ë°©ì‹ì€ íœ´ë¨¼ì—ëŸ¬ê°€ ë°œìƒí•  ìœ„í—˜ì„±ì´ ë†’ë‹¤ê³  ìƒê°ë˜ì–´ ë‹¤ë¥¸ ë°©ë²•ì„ ê³ ë¯¼í•˜ì˜€ìŠµë‹ˆë‹¤.
- ëª¨ë¸ì˜ ê²€ì¦í•˜ëŠ” ë°©ë²• ì¤‘ì— ì„œë²„ì—ì„œ ê³ ìœ í•œ ì•„ì´ë”” ê°’ì„ ë‚´ë ¤ì£¼ê±°ë‚˜ `identifiable` í”„ë¡œí† ì½œì„ ì±„íƒí•˜ì—¬ í•´ë‹¹ ëª¨ë¸ì´ ê³ ìœ í•œ idë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡í•˜ì—¬ ê²€ì¦í•˜ëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.
- í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œëŠ” ì„œë²„ì—ì„œ ê°’ì„ ë‚´ë ¤ì¤„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ëª‡ ê°€ì§€ í”„ë¡œí¼í‹°ê°€ ë§ëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.

### âš’ï¸ í•´ê²°ë°©ë²•
``` swift
func test_ë‘ë²ˆì§¸_dailyBoxOfficeì˜_numberê°’ì´_ë¬¸ìì—´2ì´ë‹¤() {
    // given
    let expectedResult = "2"
     
    // when
    let boxOfficeNumber = sut.boxOfficeResult.dailyBoxOfficeList[1].numberText
        
    // then
    XCTAssertEqual(expectedResult, boxOfficeNumber)
    }
```
- ë”°ë¼ì„œ í…ŒìŠ¤íŠ¸ í•  ë•Œë¥¼ ì œì™¸í•˜ê³  í•„ìš”ì—†ëŠ” ì½”ë“œë¼ê³  íŒë‹¨ë˜ì–´ Equatable ì±„íƒì„ ì œê±°í•˜ê³  íŠ¹ì • í”„ë¡œí¼í‹° ëª‡ ê°œë¥¼ ì²´í¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

### 2ï¸âƒ£ ErrorDescription ì‚¬ìš©
```swift
enum NetworkError: LocalizedError {
    case urlError
    case invalidResponseError
    case invalidHttpStatusCode(Int)
    case emptyData
    case decodeError
    
    var errorDescription: String {
        switch self {
        case .urlError:
            return "ì˜ëª»ëœ URLì…ë‹ˆë‹¤."
        case .invalidResponseError:
            return "ì•Œ ìˆ˜ ì—†ëŠ” ì‘ë‹µ ì—ëŸ¬ì…ë‹ˆë‹¤."
        case .invalidHttpStatusCode(let code):
            return "status: \(code)"
        case .emptyData:
            return "ë°ì´í„°ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤."
        case .decodeError:
            return "decodeErrorê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."
        }
    }
}
```
- NetworkError íƒ€ì…ì´ LocalizedErrorë¥¼ ì±„íƒí•˜ë„ë¡ í•˜ê³ , API í˜¸ì¶œì„ ìš”ì²­í•˜ëŠ” ìª½ì—ì„œ errorë¥¼ ìˆ˜ì‹ í•˜ê²Œ ë ë•Œ `error.localizedDescription`ë¥¼ í†µí•´ ìœ„ì— ì •ì˜í•œ ë¬¸ìì—´ì„ ë°˜í™˜í•˜ë„ë¡ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ `errorDescription` ì—°ì‚° í”„ë¡œí¼í‹°ë¥¼ êµ¬í˜„í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ `error.localizedDescription`ë¥¼ ì‚¬ìš©í• ì‹œ ì •ì˜í•œ ë¬¸ìì—´ì´ ë°˜í™˜ë˜ì§€ ì•ŠëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

### âš’ï¸ í•´ê²°ë°©ë²•
```swift
var errorDescription: String? {
    switch self {
    case .urlError:
        return "ì˜ëª»ëœ URLì…ë‹ˆë‹¤."
    case .invalidResponseError:
        return "ì•Œ ìˆ˜ ì—†ëŠ” ì‘ë‹µ ì—ëŸ¬ì…ë‹ˆë‹¤."
    case .invalidHttpStatusCode(let code):
        return "status: \(code)"
    case .emptyData:
        return "ë°ì´í„°ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤."
    case .decodeError:
        return "decodeErrorê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."
    }
}
```
- `errorDescription: String?`ê³¼ `errorDescription: String`ëŠ” ë‹¤ë¥¸ í”„ë¡œí¼í‹°ì´ê¸° ë•Œë¬¸ì— overrideê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šì•„ ë°œìƒí•œ ë¬¸ì œì˜€ìŠµë‹ˆë‹¤.
- `erorDescription`ì˜ íƒ€ì…ì„ String?ìœ¼ë¡œ ë³€ê²½í•´ì£¼ë‹ˆ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- LocalizedError í”„ë¡œí† ì½œì´ Errorë¥¼ ìƒì†ë°›ê¸° ë•Œë¬¸ì— Resultì˜ ì‹¤íŒ¨ íƒ€ì…ì´ Errorì—¬ë„ ì •ì˜í•œ ë¬¸ìì—´ì´ ì˜ ì¶œë ¥ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

<br>

### 3ï¸âƒ£ Endpointë¥¼ ê´€ë¦¬í•˜ëŠ” íƒ€ì…
```swift
struct BoxOfficeURLManager {
...
    
    func makeBoxOfficeURL(targetDate: String) -> URL? {
        
        var components = URLComponents()
        ...
        return components.url
    }
    
    func makeMovieInfoURL(movieCode: String) -> URL? {
        var components = URLComponents()
        ...
        return components.url
    }
}

```

- ë°•ìŠ¤ì˜¤í”¼ìŠ¤ í”„ë¡œì íŠ¸ì—ì„œëŠ” 2ê°€ì§€ apië¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    - ì¼ë³„ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ìˆœìœ„ ì¡°íšŒ
    - ì˜í™” ìƒì„¸ì •ë³´ ì¡°íšŒ
- 2ê°€ì§€ apiì˜ urlì„ ì¿¼ë¦¬ë¥¼ í†µí•´ ì •ë³´ë¥¼ ê°€ì ¸ì™€ì•¼ í•˜ê¸° ë•Œë¬¸ì— Endpointë¥¼ ê´€ë¦¬í•˜ê³  urlì„ ìƒì„±í•´ì£¼ëŠ” íƒ€ì…ì´ í•„ìš”í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.
- ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ìˆœìœ„ ì¡°íšŒë¥¼ ìœ„í•œ url, ì˜í™” ìƒì„¸ì •ë³´ ë³´ê¸°ë¥¼ ìœ„í•œ urlì„ ê°ê° ë‹¤ë¥¸ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ urlì„ ë§Œë“¤ì–´ ì£¼ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆìŠµë‹ˆë‹¤.



### âš’ï¸ í•´ê²°ë°©ë²•

``` swift
enum BoxOfficeEndpoint {
    case fetchDailyBoxOffice(targetDate: String)
    case fetchMovieInfo(movieCode: String)
}

extension BoxOfficeEndpoint {
    var path: String {
        switch self {
        case .fetchDailyBoxOffice:
            return "..."
        case .fetchMovieInfo:
            return "..."
        }
    }
    
    var queries: [URLQueryItem] {
        switch self {
        case .fetchDailyBoxOffice(let targetDate):
            return [ ... ]
        case .fetchMovieInfo(let movieCode):
            return [ ... ]
        }
    }
    
    func createURL() -> URL? {
        var components = URLComponents(string: baseURL)
        components?.path = path
        components?.queryItems = queries
        
        return components?.url
    }
}
```
- enum íƒ€ì…ìœ¼ë¡œ ì •ì˜í•˜ì—¬ 2ê°€ì§€ ì¡°íšŒ ë°©ë²•ì´ í•„ìš”í•˜ê²Œë˜ëŠ” ê²½ìš°ë¥¼ ê°ê° caseë¡œ ì§€ì •í•˜ê³  switchë¬¸ì„ ì‚¬ìš©í•˜ì—¬ caseì— ë”°ë¼ ê²½ë¡œì™€ ì¿¼ë¦¬ê°€ ë‹¬ë¼ì§€ë„ë¡ í•˜ì—¬ URLRequestì„ ìƒì„±í•´ ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½í•˜ì˜€ìŠµë‹ˆë‹¤.

<br>

### 4ï¸âƒ£ ì»¬ë ‰ì…˜ë·° ì…€ì— accessory ë·° ì¶”ê°€í•˜ê¸°
<img src="https://i.imgur.com/8z4N5m7.png" width="300">

- UICollectionViewCellì€ accessoriesë¥¼ ë‹¬ê¸°ìœ„í•´ì„œ ë”°ë¡œ ì´ë¯¸ì§€ë·°ë¥¼ í™œìš©í•´ ì§ì ‘ ë ˆì´ì•„ì›ƒì„ ì„¤ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.


### âš’ï¸ í•´ê²°ë°©ë²•
``` swift
private func createListLayout() -> UICollectionViewCompositionalLayout {
    var config = UICollectionLayoutListConfiguration(appearance: .plain)
        
    return UICollectionViewCompositionalLayout.list(using: config)
}
```

-  ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” UICollectionLayoutListConfigurationì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì¬ì‚¬ìš©í•˜ëŠ” ì…€ì˜ íƒ€ì…ë„ UICollectionViewListCellë¡œ ì„¤ì •í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.

``` swift
final class BoxOfficeCollectionViewListCell: UICollectionViewListCell {    
    override func awakeFromNib() {
    super.awakeFromNib()

    self.accessories = [
        .disclosureIndicator()
    ]
}
```
- UICollectionViewListCellì—ì„œ accesories í”„ë¡œí¼í‹°ë¥¼ í™œìš©í•´ ì¶”ê°€í•´ì£¼ê³  ì‹¶ì€ accessoryë¥¼ ì¶”ê°€í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br>

### 5ï¸âƒ£ Separator Inset
<img src="https://i.imgur.com/0tKZ0Nf.png" width="300">

- ì²˜ìŒì—” ListCellì˜ Separator Insetì„ ì¡°ì ˆí•´ì£¼ê¸° ìœ„í•´ `updateConstraints` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
```swift
// BoxOfficeCollectionViewListCell

override func updateConstraints() {
    super.updateConstraints()
    
    separatorLayoutGuide.leadingAnchor.constraint(equalTo: self.leadingAnchor).isActive = true
}
```
- ì´ë¥¼ í†µí•´ Separator Insetì„ ì¡°ì ˆí•´ì¤„ ìˆ˜ ìˆì—ˆì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼°ìŠµë‹ˆë‹¤.

<img src="https://i.imgur.com/t9fnQ76.png" width="500">

### âš’ï¸ í•´ê²°ë°©ë²•
- `separatorConfiguration.bottomSeparatorInsets` í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë°©ë²•ì„ ë³€ê²½í•´ì£¼ì—ˆê³  ì´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í”„ë¡œì íŠ¸ì˜ ë²„ì „ì„ 14.5ë¡œ ì˜¬ë ¤ì£¼ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
```swift
// BoxOfficeViewController

private func createListLayout() -> UICollectionViewCompositionalLayout {
    var config = UICollectionLayoutListConfiguration(appearance: .plain)
    config.separatorConfiguration.bottomSeparatorInsets = .init(top: 0, leading: 0, bottom: 0, trailing: 0)
    return UICollectionViewCompositionalLayout.list(using: config)
}
```

<br>

### 6ï¸âƒ£ ì˜í™” í¬ìŠ¤í„° ì´ë¯¸ì§€ì™€ ì˜í™” ì •ë³´ ë ˆì´ë¸” ë™ì‹œì— í‘œì‹œí•˜ê¸°
- ì˜í™” ìƒì„¸ì •ë³´(ì˜í™”ì§„í¥ìœ„ì›íšŒ API), ì˜í™” í¬ìŠ¤í„° ì´ë¯¸ì§€(ì¹´ì¹´ì˜¤ ì´ë¯¸ì§€ API) ë¶ˆëŸ¬ì˜¤ê¸° 2ê°€ì§€ ì‘ì—…ì´ ê°ê° ë¹„ë™ê¸°ë¡œ ì‘ì—…ì´ ì§„í–‰ë©ë‹ˆë‹¤.
- ë‘˜ ì¤‘ íŠ¹ì • í•œê°€ì§€ ì‘ì—…ì´ ëë‚¬ì„ ë•Œ, Activity Indicatorì˜ ì• ë‹ˆë©”ì´ì…˜ì„ ì¢…ë£Œì‹œí‚¤ëŠ” ê²ƒì´ ì ì ˆì¹˜ ëª»í•˜ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.


### âš’ï¸ í•´ê²°ë°©ë²• 1

``` swift
fetchMovieInfo(completion: checkFetchComplete)
fetchMoviePosterImage(completion: checkFetchComplete)
```

``` swift
private func fetchMovieInfo(completion: @escaping () -> ()) {
    guard let movieCode = movieCode else { return }

    let endPoint: BoxOfficeEndPoint = .fetchMovieInfo(movieCode: movieCode)

    networkManager.fetchData(request: endPoint.createRequest(), type: Movie.self) {
        [weak self] result in
        guard let self = self else { return }

        switch result {
        case .success(let data):
            self.movieInfo = data
        case .failure(let error):
            print(error.localizedDescription)
            self.showFailAlert(error: error)
        }
        completion()
    }
}
```
- fetchMovieInfo(ìƒì„¸ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°)ì™€ fetchMovieFoster(ì˜í™”í¬ìŠ¤í„° ì´ë¯¸ì§€ ë¶ˆëŸ¬ì˜¤ê¸°) ë©”ì„œë“œì— completion í•¸ë“¤ëŸ¬ë¥¼ ì¶”ê°€í•˜ì—¬ ê°ê° completionì´ ì‹¤í–‰ë  ë•Œë§ˆë‹¤ ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ”ì§€ ê²€ì‚¬í•˜ëŠ” ë¡œì§ì„ ì¶”ê°€í–ˆìŠµë‹ˆë‹¤. 

```swift
private var movieInfo: Movie?
private var posterImage: UIImage?

private func checkFetchComplete() {
    guard posterImage != nil && movieInfo != nil,
          let movieInfo = movieInfo else { return }
    
    DispatchQueue.main.async { [weak self] in
        guard let self = self else { return }
        
        self.activityIndicator.stopAnimating()
        self.posterImageView.image = self.posterImage
        self.configureLabels(data: movieInfo)
        self.contentStackView.isHidden = false
    }
}
```
- fetchMovieInfo, fetchMoviePoster ë©”ì„œë“œë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ëª¨ë‘ ë°›ì•˜ëŠ”ì§€ í™•ì¸í•˜ê³ 
- 2ê°€ì§€ ì‘ì—…ì´ ëª¨ë‘ ëë‚¬ì„ ë•Œ, Activity Indicatorì˜ ì• ë‹ˆë©”ì´ì…˜ì„ ì¤‘ì§€ì‹œí‚¤ê³  í™”ë©´ì— ì´ë¯¸ì§€ì™€ ì •ë³´ë¥¼ ë™ì‹œì— í‘œì‹œí•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

### âš’ï¸ í•´ê²°ë°©ë²• 2
- í•´ê²°ë°©ë²• 1ì—ì„œ checkFetchCompleteë¼ëŠ” í•¨ìˆ˜ë¥¼ (ë°•ìŠ¤ì˜¤í”¼ìŠ¤ìˆœìœ„ ì¡°íšŒ, ì˜í™” í¬ìŠ¤í„° ê°€ì ¸ì˜¤ê¸°) ë‘ ê°€ì§€ ì‘ì—…ì˜ ì»´í”Œë¦¬ì…˜ìœ¼ë¡œ ì‚¬ìš©í•˜ì—¬ ì²´í¬í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ì´ ë°©ë²•ì—ì„œì˜ ë¬¸ì œì ì´ ì˜¤ë¡œì§€ ì²´í¬ë¥¼ í•˜ê¸°ìœ„í•œ ìš©ë„ì˜ í”„ë¡œí¼í‹°ë“¤ì„ ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê°€ì ¸ì•¼ í•œë‹¤ëŠ” ê²ƒì´ê³ , ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì´ëŸ° ì²´í¬ë¥¼ í•˜ëŠ” ë¡œì§ì„ ë”°ë¡œ ìˆ˜í–‰ì„ í•´ì•¼í•´ì„œ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì— ê¸°ëŠ¥ì´ ì§‘ì¤‘ë˜ì–´ ìˆë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

``` swift
// MovieInfoViewController.swift

private func loadData() {
    let group = DispatchGroup()

    activityIndicator.startAnimating()
    group.enter()
    movieInfoDataLoader.loadMovieInfo(movieCode: movieCode) { result in
        DispatchQueue.main.async { [weak self] in
            switch result {
            case .success(let data):
                self?.configureLabels(data: data)
                group.leave()
            case .failure(let error):
                self?.showFailAlert(error: error)
                group.leave()
            }
        }
    }
    
    group.notify(queue: .main) { [weak self] in
            self?.showMovieInfo()
    }
}
```
- DispatchGroupì„ í™œìš©í•´ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë°œìƒí•˜ëŠ” ë‘ ê°€ì§€ ì‘ì—…ì„ `group.notify(queue:)` ë©”ì„œë“œë¥¼ í™œìš©í•´ ë™ì‹œì— ë·°ì— ë‚˜íƒ€ë‚  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.
- ì´ë ‡ê²Œ ìˆ˜ì •í•œ ê²°ê³¼ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì„œë²„ì™€ í†µì‹ ì„í•´ ë°ì´í„°ë¥¼ ë°›ê³ , ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê³  ë‹¤ì‹œ ì´ë¯¸ì§€ë¥¼ ë¡œë“œí•˜ê³  í•˜ëŠ” ì¼ë ¨ì˜ ê³¼ì •ë“¤ì„ ë‹¤ë¥¸ íƒ€ì…ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. 
- ë˜, ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” ë°ì´í„°ê°€ ì •ìƒì ìœ¼ë¡œ ë°›ì•„ì¡ŒëŠ”ì§€ í™•ì¸í•˜ëŠ” ìš©ë„ì˜ í”„ë¡œí¼í‹°ê°€ ë¶ˆí•„ìš”í•˜ê²Œ ë˜ì—ˆê³  ì½”ë“œë¥¼ ë³´ì•˜ì„ ë•Œ ì–´ë–¤ ì‘ì—…ì„ í•˜ëŠ” ê²ƒì¸ì§€ ì•Œê¸°ê°€ ì¡°ê¸ˆ ì‰¬ì›Œì¡Œë‹¤ê³  ìƒê°í•©ë‹ˆë‹¤.
- ë”°ë¼ì„œ `í•´ê²°ë°©ë²• 2`ë¥¼ ì±„íƒí•˜ì—¬ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.

### 7ï¸âƒ£ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ë°ì´í„° ê´€ë ¨ ê¸°ëŠ¥ ì¶”ìƒí™”
- `6ï¸âƒ£ì˜ í•´ê²°ë°©ë²• 2`ë¥¼ í†µí•´ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ê¸°ëŠ¥ ë¶„ë¦¬ê°€ ì œëŒ€ë¡œ ë˜ì§€ ëª»í–ˆë‹¤ê³  ëŠê¼ˆê³ , ë”ìš±ì´ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì—­í• ê¹Œì§€ í•œë‹¤ëŠ” ê²ƒë„ ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì— ë„ˆë¬´ ë§ì€ ê¸°ëŠ¥ì´ ì§‘ì¤‘ë˜ì–´ ìˆë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

### âš’ï¸ í•´ê²°ë°©ë²•

``` swift
// MovieInfoDataLoader.swift

func loadMovieInfo(movieCode: String?, completion: @escaping (Result<Movie, Error>) -> ()) {
guard let movieCode = movieCode else { return }

let endPoint: BoxOfficeEndpoint = .fetchMovieInfo(movieCode: movieCode)

networkManager.fetchData(request: endPoint.createRequest(), type: Movie.self) {
    result in
    switch result {
    case .success(let data):
        completion(.success(data))
    case .failure(let error):
        completion(.failure(error))
    }
}
```
- ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ì„œë²„ì™€ í†µì‹ í•˜ê³  ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê¸°ëŠ¥ì„ ìƒˆë¡œìš´ íƒ€ì…ìœ¼ë¡œ ë¶„ë¦¬ì‹œì¼œ ì£¼ì—ˆìŠµë‹ˆë‹¤.
- ë·° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” ë·°ë¥¼ ì—…ë°ì´íŠ¸ë¥¼ í•˜ëŠ” ì‘ì—…ì— ëŒ€í•œ ì½”ë“œë§Œ í´ë¡œì ¸ë¥¼ í†µí•´ ë„˜ê²¨ì£¼ë©°, ì‘ì—…ì´ ëë‚˜ëŠ”ì§€ ì²´í¬í•˜ëŠ” ë°©ë²•ì€ `6ï¸âƒ£ì˜ í•´ê²°ë°©ë²• 2`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—­í•  ë¶„ë¦¬ë¥¼ í•´ì¤„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

<br>

### 8ï¸âƒ£ Mockì„ í™œìš©í•œ Network Model Test
- ì•„ë˜ì˜ ì½”ë“œëŠ” ë¯¸ë¦¬ ìƒ˜í”Œ ë°ì´í„°ë¥¼ MockURLSessionì— ì¤€ë¹„í•´ë‘ê³ , fetchData() ë©”ì„œë“œê°€ ì„±ê³µí•œë‹¤ëŠ” ê°€ì •í•˜ì— fetchData ë©”ì„œë“œì˜ ì»´í”Œë¦¬ì…˜ í•¸ë“¤ëŸ¬ë¡œ ë‚´ë ¤ì˜¤ëŠ” ê²°ê³¼ê°€ ìƒ˜í”Œ ë°ì´í„°ì™€ ì¼ì¹˜í•˜ëŠëƒë¥¼ ê²€ì‚¬í•˜ëŠ” í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤.

``` swift
func test_fetchData_í˜¸ì¶œì‹œ_BoxOffice_sample_data_ë¶ˆëŸ¬ì˜¤ê¸°ì—_ì„±ê³µí•œë‹¤() {
    // given
    let expectedResult = try? JSONDecoder().decode(BoxOffice.self, from: SampleData.boxOfficeData!)
    let request = BoxOfficeEndpoint.fetchDailyBoxOffice(targetDate: "20120101").createRequest()

    // when, then
    sut.fetchData(request: request, type: BoxOffice.self) { result in
        switch result {
        case .success(let data):
            XCTAssertEqual(expectedResult?.boxOfficeResult.type, data.boxOfficeResult.type)
        case .failure:
            XCTFail()
        }
    }
}
```
- ìœ„ì™€ ê°™ì€ í˜•ì‹ì˜ í…ŒìŠ¤íŠ¸ëŠ” ë‹¨ìˆœíˆ ê²°ê³¼ ê°’ì— ëŒ€í•œ ìƒíƒœë¥¼ ê²€ì¦í•˜ëŠ” Stub í…ŒìŠ¤íŠ¸ë¼ëŠ” ìƒê°ì„ í–ˆê³ , Mock ê°ì²´ë¥¼ ì‚¬ìš©í•˜ëŠ” ìš©ë„ë¥¼ ë‹¤ì‹œ ìƒê°í•´ë³´ì•˜ì„ ë•Œ fetchDataë¼ëŠ” í–‰ìœ„ë¥¼ ê²€ì¦í•˜ê¸° ìœ„í•´ì„œëŠ” fetchDataì˜ í˜¸ì¶œë¡œ ì¸í•´ ê°œë°œìê°€ ì„¤ê³„í•œ í–‰ìœ„ë“¤ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ë¥¼ ê²€ì¦í•´ì•¼í•œë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.


### âš’ï¸ í•´ê²°ë°©ë²•

```swift
class MockURLSession: URLSessionProtocol {
    ...
    var request: URLRequest!
    var dataTaskCallCount = 0
    
    ...
    
    func dataTask(with request: URLRequest, completionHandler: @escaping (Data?, URLResponse?, Error?) -> Void) -> URLSessionDataTaskProtocol {
        self.request = request
        self.dataTaskCallCount += 1
        
        ...
    }
}

class MockURLSessionDataTask: URLSessionDataTaskProtocol {
    ...
    var resumeCallCount = 0
    
    func resume() {
        self.resumeCallCount += 1
        resumeDidCall?()
    }
}
```
- ìœ„ì™€ ê°™ì´ `request`, `dataTaskCallCount`, `resumeCallCount`ë¥¼ ì¶”ê°€í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.
- í…ŒìŠ¤íŠ¸í•˜ê³ ìí•˜ëŠ” íƒ€ì…ì€ NetworkManagerë¡œ ì£¼ìš” ê¸°ëŠ¥ìœ¼ë¡œëŠ” fetchDataê°€ ìˆê³ , fetchDataê°€ í•˜ëŠ” ê¸°ëŠ¥ì€ dataTask ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ê³  dataTaskë¥¼ resume í•˜ëŠ” ì¼ì…ë‹ˆë‹¤. 
- ë”°ë¼ì„œ ìƒˆë¡­ê²Œ ì„ ì–¸í•œ í”„ë¡œí¼í‹°ë“¤ì„ í™œìš©í•´ MockURLSession ê°ì²´ì•ˆì— requestê°€ ì˜ ì „ë‹¬ì´ ë˜ì—ˆëŠ”ì§€, dataTaskëŠ” í•œë²ˆ í˜¸ì¶œëœ ê²ƒì´ ë§ëŠ”ì§€, resume() ë©”ì„œë“œê°€ í•œë²ˆ í˜¸ì¶œëœ ê²ƒì´ ë§ëŠ”ì§€ë¥¼ í™•ì¸í•  í•„ìš”ê°€ ìˆë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

```swift
func test_fetchData_í˜¸ì¶œì—_ë„˜ê²¨ì¤€_requestì™€_sessionì˜_requestê°€_ë™ì¼í•˜ë‹¤() {
    // given
    let request = BoxOfficeEndpoint.fetchDailyBoxOffice(targetDate: "20120101").createRequest()
    
    // when
    let session = MockURLSession()
    sut = .init(session: session)
    sut.fetchData(request: request, type: BoxOffice.self) { _ in return }
    
    // then
    XCTAssertEqual(request, session.request)
}

func test_fetchData_í˜¸ì¶œì‹œ_sessionì˜_dataTaskëŠ”_1ë²ˆ_í˜¸ì¶œëœë‹¤() {
    ...
    XCTAssertEqual(1, session.dataTaskCallCount)
}

func test_fetchData_í˜¸ì¶œì‹œ_sessionDataTaskì˜_resumeì´_1ë²ˆ_í˜¸ì¶œëœë‹¤() {
    ...
    XCTAssertEqual(1, session.sessionDataTask.resumeCallCount)
}
```

<br>

### 9ï¸âƒ£ Icon ëª¨ì–‘ì˜ ì…€ì— Dynamic Type ì ìš© ë¬¸ì œ
<img src="https://i.imgur.com/Wz7f0eA.png" width="200">

- Icon ëª¨ì–‘ì˜ ì…€ì—ì„œ Acessbility Inspectorë¡œ í…ìŠ¤íŠ¸ í¬ê¸°ë¥¼ í‚¤ìš°ê²Œë˜ë©´ ìœ„ì™€ ê°™ì€ ëª¨ìŠµìœ¼ë¡œ ì§¤ë¦¬ê±°ë‚˜ íŠ¹ì • ë ˆì´ë¸”ì€ í‘œì‹œê°€ ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
- ì¼ë‹¨ì€ ì‘ì€ í¬ê¸°ì˜ ì…€ì— ë„ˆë¬´ ë§ì€ ì •ë³´ë¥¼ ë‹´ê³  ìˆë‹¤ê³  ìƒê°ì´ ë“¤ì—ˆê³ , ì²˜ìŒ ìƒê°í•œ í•´ê²°ë°©ë²•ì€ ê°ê°ì˜ ì…€ë§ˆë‹¤ ì»¨í…ì¸ ì—ë”°ë¼ ë†’ì´ë¥¼ ë‹¤ë¥´ê²Œ ì£¼ëŠ”ê²ƒì„ ê³ ë ¤í–ˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ê°ê°ì˜ ì…€ë§ˆë‹¤ ë‹¤ë¥¸ ë†’ì´ë¥¼ ì£¼ê²Œë˜ë©´ ì–´ìƒ‰í•œ ëª¨ì–‘ìœ¼ë¡œ ì •ë³´ì˜ ì „ë‹¬ì´ ì˜ ì•ˆë  ê²ƒì´ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤.

### âš’ï¸ í•´ê²°ë°©ë²•
``` swift
NotificationCenter.default.addObserver(self,
                                       selector: #selector(simplifyItems),
                                       name: UIContentSizeCategory.didChangeNotification,
                                       object: nil)

@objc private func simplifyItems() {
    if traitCollection.preferredContentSizeCategory >= UIContentSizeCategory.extraExtraLarge {
        rankInfoLabel.isHidden = true
        audienceInfoLabel.isHidden = true
    } else {
        rankInfoLabel.isHidden = false
        audienceInfoLabel.isHidden = false
    }
}
```
- ì…€ì—ì„œ ê°€ì¥ í•„ìš”í•œ ì •ë³´ëŠ” ìˆœìœ„ì™€ ì œëª©ì´ë¼ê³  ìƒê°ì„ í–ˆìŠµë‹ˆë‹¤.
- `UIContentSizeCategory.didChangeNotification`ì˜ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•´ ì»¨í…ì¸ ì‚¬ì´ì¦ˆ ì¹´í…Œê³ ë¦¬ë¥¼ ê²€ì‚¬í•˜ì—¬ `UIContentSizeCategory.extraExtraLarge` í¬ê¸° ì´ìƒì¼ë•Œ ìˆœìœ„ì™€ ì œëª©ì™¸ì˜ ë ˆì´ë¸”ì€ Hidden ì²˜ë¦¬í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

<img src="https://i.imgur.com/19hjHBq.png" width="200">

<br>

### ğŸ”Ÿ Alertì´ í•„ìš”í• ë•Œë§ˆë‹¤ AlertControllerë¥¼ ë§¤ë²ˆ ì •ì˜í•´ì£¼ë˜ ë¬¸ì œ
``` swift
extension UIViewController {
    func showIconModeSheet(completion: @escaping (UIAlertAction) -> ()) {
        let actionSheet = UIAlertController(title: "í™”ë©´ëª¨ë“œë³€ê²½",
                                      message: nil,
                                      preferredStyle: .actionSheet)
        
        actionSheet.addAction(UIAlertAction(title: "ì•„ì´ì½˜", style: .default, handler: completion))
        actionSheet.addAction(UIAlertAction(title: "ì·¨ì†Œ", style: .cancel))
        present(actionSheet, animated: true)
    }
    ...
}

```
- ìœ„ì™€ ê°™ì€ ë°©ì‹ìœ¼ë¡œ extensionì„ í™œìš©í•´ í•„ìš”í•œ Alertì´ ìˆì„ë•Œë§ˆë‹¤ ìƒˆë¡­ê²Œ extensionì— ì¶”ê°€í•´ ì£¼ì–´ì•¼í–ˆìŠµë‹ˆë‹¤.
- ë˜í•œ, ë°˜ë³µì ì¸ ì½”ë“œê°€ ë§ì´ ì‘ì„±í•´ì•¼í•˜ëŠ” ë¹„íš¨ìœ¨ì ì¸ ë°©ì‹ì´ë¼ëŠ” ìƒê°ì´ë“¤ì—ˆìŠµë‹ˆë‹¤.

### âš’ï¸ í•´ê²°ë°©ë²•: Factory íŒ¨í„´ ì‚¬ìš©í•˜ê¸°

#### AlertFactoryService
``` swift
protocol AlertFactoryService {
    func makeAlert(alertData: AlertViewData) -> UIAlertController
}

```
- í”„ë¡œí† ì½œì„ í™œìš©í•´ AlertControllerë¥¼ ìƒì„±í•´ì£¼ëŠ” ë©”ì„œë“œë¥¼ ì •ì˜í–ˆìŠµë‹ˆë‹¤.

#### AlertViewData ì •ì˜
``` swift
struct AlertViewData {
    let title: String
    let message: String?
    let style: UIAlertController.Style
    let enableOkAction: Bool
    let okActionTitle: String
    let okActionStyle: UIAlertAction.Style
    let enableCancelAction: Bool
    let cancelActionTitle: String?
    let cancelActionStyle: UIAlertAction.Style
    let completion: (() -> ())?
}
```
- AlertControllerë¥¼ ìƒì„±í• ë•Œ í•„ìš”í•œ ì •ë³´ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆë„ë¡ AlertViewData íƒ€ì…ì„ ìƒì„±í•´ ì£¼ì—ˆìŠµë‹ˆë‹¤.

#### AlertImplementation ì •ì˜
``` swift
final class AlertImplementation: AlertFactoryService {
    
    func makeAlert(alertData: AlertViewData) -> UIAlertController {
        let alertController = UIAlertController(title: alertData.title,
                                                message: alertData.message,
                                                preferredStyle: alertData.style)
        
        if alertData.enableOkAction {
            let okAction = UIAlertAction(
                title: alertData.okActionTitle,
                style: alertData.okActionStyle) { _ in
                    alertData.completion?()
                }
            alertController.addAction(okAction)
        }
        
        ...
        
        return alertController
    }
}
```
- AlertFactoryServiceì„ ì±„íƒí•˜ê³  ìˆëŠ” `AlertImplementation`ì„ ì •ì˜í•˜ì—¬ makeAlert() ë©”ì„œë“œì˜ ë™ì‘ì„ ì •ì˜í–ˆìŠµë‹ˆë‹¤.
- AlertViewDataì˜ ì •ë³´ë¥¼ í†µí•´ AlertControllerì˜ ì œëª©, ë©”ì„¸ì§€, ìŠ¤íƒ€ì¼, ì»´í”Œë¦¬ì…˜í•¸ë“¤ëŸ¬ ë“±ì„ ì§€ì •í•˜ê³  AlertController ê°ì²´ë¥¼ ë°˜í™˜í•˜ë„ë¡ í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

#### ì‚¬ìš©
``` swift
@IBAction private func switchLayoutModeTapped() {
    let alertData = AlertViewData(title: "í™”ë©´ëª¨ë“œ ë³€ê²½",
                                  message: nil,
                                  style: .actionSheet,
                                  enableOkAction: true,
                                  okActionTitle: layoutMode.actionTitle,
                                  okActionStyle: .default,
                                  enableCancelAction: true,
                                  completion: changeLayout)
    let actionSheet = alertFactory.makeAlert(alertData: alertData)

    present(actionSheet, animated: true)
}
```
- Alertì´ê°€ í•„ìš”í• ë•Œë§ˆë‹¤ ë§¤ë²ˆ AlertControllerì˜ ìƒì„±ì„ ì •ì˜í•  í•„ìš”ì—†ì´ AlertViewDataë¥¼ ì‘ì„±í•´ì„œ makeAlert(alertData:) ë©”ì„œë“œì— ì£¼ì…ì‹œì¼œì£¼ë©´ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

<br>

### 1ï¸âƒ£1ï¸âƒ£ í™”ë©´ ëª¨ë“œ ë³€ê²½(ë¦¬ìŠ¤íŠ¸, ì•„ì´ì½˜)ì—ì„œ ë°œìƒí•˜ëŠ” Constraints ì—ëŸ¬, ë¶€ìì—°ìŠ¤ëŸ¬ìš´ ëª¨ë“œë³€ê²½

<img src="https://user-images.githubusercontent.com/51234397/231966484-f396e3c1-8e1b-4950-8914-583e76c4a640.gif" width="200">

- ì²˜ìŒì—” `collectionView.setCollectionViewLayout(layout:_, animated: true)` ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë ˆì´ì•„ì›ƒì„ ë³€ê²½í•´ì£¼ë©°, BoxOfficeViewControllerì— ì •ì˜ëœ `LayoutMode`ì— ë”°ë¼ ì¼ì¹˜í•˜ëŠ” ì…€ì˜ íƒ€ì…ì„ ë°˜í™˜í•´ì£¼ëŠ” ë°©ì‹ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ë¦¬ìŠ¤íŠ¸ ëª¨ë“œì—ì„œ ì•„ì´ì½˜ ëª¨ë“œë¡œ ë³€ê²½ë  ì‹œ, ë ˆì´ì•„ì›ƒì´ ë³€ê²½ë˜ê¸° ì „ì— `reloadData()`ë¥¼ í•´ì£¼ëŠ” ê³¼ì •ì—ì„œ ì•„ì´ì½˜ ëª¨ë“œì˜ Cellì´ ë¦¬ìŠ¤íŠ¸ ë ˆì´ì•„ì›ƒì—ì„œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” Cellì˜ í¬ê¸°ë³´ë‹¤ ì»¤ ë°œìƒí•œ ì˜¤ë¥˜ë¡œ ì¸í•œ ë ˆì´ì•„ì›ƒ ì—ëŸ¬ê°€ ì½˜ì†”ì°½ì— ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.
- ê·¸ë¦¬ê³  ë ˆì´ì•„ì›ƒê³¼ ì…€ì„ ë™ì‹œì— ë³€ê²½í•  ìˆ˜ ì—†ê¸°ì— í™”ë©´ ëª¨ë“œ ë³€ê²½ ì‹œ ì‘ë™ë˜ëŠ” ì• ë‹ˆë©”ì´ì…˜ì´ ë¶€ìì—°ìŠ¤ëŸ¬ìš´ ëª¨ìŠµì„ ë³´ì—¬ì£¼ì—ˆìŠµë‹ˆë‹¤.

### âš’ï¸ í•´ê²°ë°©ë²• 1 - 2ê°œì˜ CollectionView ì‚¬ìš©
- ì´ì— ëŒ€í•œ í•´ê²° ë°©ë²•ìœ¼ë¡œ ê°ê°ì˜ í™”ë©´ ëª¨ë“œì— ë”°ë¥¸ CollectionViewë¥¼ ë”°ë¡œ êµ¬í˜„í•´ì£¼ê³ , ë¶ˆí•„ìš”í•œ CollectionViewë¥¼ Hidden í•´ì£¼ëŠ” ë°©ì‹ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
``` swift
extension UICollectionView {
    func fadeIn(_ duration: TimeInterval = 0.4) {
        self.alpha = 0
        self.isHidden = false
        UICollectionView.animate(withDuration: duration) { [weak self] in
            self?.alpha = 1
        }
    }
    
    func fadeOut(_ duration: TimeInterval = 0.4) {
        UICollectionView.animate(withDuration: duration) { [weak self] in
            self?.alpha = 0
        }
    }
}
```

- Hiddenì„ í•´ì£¼ê³  Hiddenì„ ì œê±°í•´ì£¼ëŠ” ê³¼ì •ì— ìœ„ì™€ ê°™ì´ `UICollcectionView.animate`ë¥¼ ë”°ë¡œ ì •ì˜í•´ì£¼ì–´ ì „í™˜ê°„ì— ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì£¼ì—ˆìŠµë‹ˆë‹¤.
- í•˜ì§€ë§Œ ê°™ì€ ë°ì´í„°ë¥¼ 2ê°œì˜ CollectionViewê°€ í•­ìƒ ê°–ê³  ìˆê²Œ ë˜ëŠ” ì ì´ ë‹¨ì ì´ë¼ ìƒê°ë˜ì—ˆìŠµë‹ˆë‹¤.

### âš’ï¸ í•´ê²°ë°©ë²• 2 - 1ê°œì˜ CollectionView ì‚¬ìš© + setCollectionViewLayoutì—ì„œ ì• ë‹ˆë©”ì´ì…˜ ì œê±°
- ì²˜ìŒì— ì‚¬ìš©í–ˆë˜ ë°©ì‹ì„ ì ìš©í•˜ê¸° ìœ„í•´ ì•„ì´ì½˜ ëª¨ë“œì˜ Cell Itemë“¤ì˜ Spacingì„ ì¡°ì ˆí•˜ì—¬ ë ˆì´ì•„ì›ƒ ì—ëŸ¬ë¥¼ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.
- `setCollectionViewLayout` ë©”ì„œë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ë©° ë¶€ìì—°ìŠ¤ëŸ¬ìš´ ê¸°ë³¸ ì• ë‹ˆë©”ì´ì…˜ì€ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
- ëŒ€ì‹  `í•´ê²°ë°©ë²• 1`ì—ì„œ ì •ì˜í•´ì¤¬ë˜ Custom Animationì„ ì‚¬ìš©í•˜ì—¬ ìì—°ìŠ¤ëŸ½ê²Œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

<br>

### 1ï¸âƒ£2ï¸âƒ£ URLCacheë¥¼ ì›í•˜ëŠ” ë°©ì‹(In-Memory / On-Disk)ìœ¼ë¡œ ì‚¬ìš©
- ì²˜ìŒ ì•±ì„ ì‹¤í–‰ì‹œì¼°ì„ ë•Œ í‘œì‹œë˜ëŠ” í™”ë©´ì€ ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ìˆœìœ„ë¥¼ í‘œì‹œí•´ì£¼ëŠ” í™”ë©´ì…ë‹ˆë‹¤.
- í•´ë‹¹ í™”ë©´ì— ì •ë³´ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•´ APIë¥¼ í†µí•´ ì„œë²„ì™€ í†µì‹ ì„ í•´ì•¼í•˜ëŠ”ë°, ì•±ì˜ ì²«í™”ë©´ì€ ì²« ì¸ìƒì´ë¼ëŠ” ìƒê°ìœ¼ë¡œ ì´ë•Œ ìƒê¸°ëŠ” ë¡œë”©ì„ ì¤„ì—¬ì£¼ê³ ì ë°•ìŠ¤ì˜¤í”¼ìŠ¤ì— ê´€ë ¨ëœ ë°ì´í„°ëŠ” On-Disk ë°©ì‹ìœ¼ë¡œ ìºì‹œí•˜ê¸°ë¡œ í–ˆìŠµë‹ˆë‹¤.
- ë°•ìŠ¤ì˜¤í”¼ìŠ¤ ìˆœìœ„ë¥¼ í‘œì‹œí•´ì£¼ëŠ” í™”ë©´ì—ì„œ ì˜í™”ë¥¼ ì„ íƒí•˜ë©´ ë‚˜ì˜¤ëŠ” ìƒì„¸í™”ë©´ì—ì„œëŠ” ìƒì„¸ì •ë³´ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” APIì™€ ì¹´ì¹´ì˜¤ ì´ë¯¸ì§€ ê²€ìƒ‰ APIë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.
- ë”°ë¼ì„œ ìºì‹œí•  ë°ì´í„°ê°€ ë‚ ì§œë³„ë¡œ ì˜í™”ë³„ë¡œ ë§ì´ ì¡´ì¬í•˜ê³ , ì‚¬ìš©ìê°€ ëª¨ë“  ì˜í™”ë¥¼ ì„ íƒí•˜ì§€ ì•Šì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— In-Memoryë¡œ ìºì‹œí•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

### âš’ï¸ í•´ê²°ë°©ë²•

```swift
class URLCacheManager {
    private static let inMemoryCache = URLCache(memoryCapacity: 4 * 1024 * 1024, diskCapacity: 0)
    private static let onDiskCache = URLCache(memoryCapacity: 0, diskCapacity: 20 * 1024 * 1024)
    
    private init() {}
    
    static func getURLCache<T: Decodable>(type: T.Type) -> URLCache {
        if type == BoxOffice.self {
            return onDiskCache
        } else {
            return inMemoryCache
        }
    }
}
```

- `In-Memory Capacityë§Œ ê°€ì§„ inMemoryCache`ì™€ `On-Disk Capacityë§Œ ê°€ì§„ onDiskCache`ë¥¼ ìƒì„±í•´ì£¼ì–´ ì›í•˜ëŠ” ë°©ì‹ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ êµ¬í˜„í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.

<br>

## 6. íŒ€íšŒê³ 
### ìš°ë¦¬íŒ€ì´ ì˜í•œ ì 
- ëê¹Œì§€ ëª¨ë¥´ëŠ” ë¶€ë¶„ì— ëŒ€í•´ì„œ í•´ê²°í•˜ë ¤ê³  ë…¸ë ¥í•˜ê³  ë‚˜ë¦„ì˜ ê²°ë¡ ì„ ë‚´ë¦° ì 
- í•œ ë‹¬ê°€ëŸ‰ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì§€ì¹˜ëŠ” ì‹œê°„ë„ ìˆì—ˆì§€ë§Œ ì„œë¡œ ì‘ì›í•˜ë©° ì—´ì‹¬íˆ í•œ ì 

### ìš°ë¦¬íŒ€ì´ ë…¸ë ¥í•  ì 
- PR ì˜¬ë¦¬ëŠ” ì‹œê°„ ê³„íšì„ ì˜ ì„¸ìš°ê³  ë¦¬ë·°ì–´ì™€ ì‹œê°„ í˜‘ì˜ë¥¼ ì˜ í•˜ì !
- í”„ë¡œì íŠ¸ê°€ ì¢…ë£Œëœ ì´í›„ì—ë„ í•´ê²°ë˜ì§€ ì•Šì•˜ë˜ ë¬¸ì œì— ëŒ€í•´ì„œ ê³ ë¯¼í•´ë³´ì !

<br>

## 7. ì°¸ê³  ë§í¬
- [Apple Docs - URLSession](https://developer.apple.com/documentation/foundation/urlsession)
- [Apple Docs - Fetching Website Data into Memory](https://developer.apple.com/documentation/foundation/url_loading_system/fetching_website_data_into_memory)
- [Wiki - HTTP](https://ko.wikipedia.org/wiki/HTTP)
- [Apple Docs - UICollectionViewCompositionalLayout](https://developer.apple.com/documentation/uikit/uicollectionviewcompositionallayout)
- [Apple Docs - UICollectionLayoutListConfiguration](https://developer.apple.com/documentation/uikit/uicollectionlayoutlistconfiguration)
- [WWDC2020 - Modern Cell Configuration](https://developer.apple.com/videos/play/wwdc2020/10027/)
- [Realm - Swiftì˜ ê°•ë ¥í•œ mock ê°ì²´ ë§Œë“¤ê¸°](https://academy.realm.io/kr/posts/making-mock-objects-more-useful-try-swift-2017/)
- [Apple Docs - setCollectionViewLayout](https://developer.apple.com/documentation/uikit/uicollectionview/1618017-setcollectionviewlayout)
- [Apple - URLCache](https://github.com/apple/swift-corelibs-foundation/blob/main/Sources/FoundationNetworking/URLCache.swift)
- [Apple - swift-corelibs-foundation(URLCache)](https://github.com/apple/swift-corelibs-foundation/blob/main/Sources/FoundationNetworking/URLCache.swift)

---


###### tags: `readme`
